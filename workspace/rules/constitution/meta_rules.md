# 元规则：规则系统如何运作

本文件定义规则的创建、修改、冲突处理和清理机制。

## 规则文件格式
- 规则文件统一使用 Markdown + 自然语言。
- 每个文件必须有清晰标题和分层结构。
- 规则内容应可被 LLM 直接理解，避免过度结构化表达。
- 经验级规则在文件末尾附带更新时间与验证状态。
- 规则条目应尽量可执行、可验证、可追溯。

## 规则生命周期
规则默认经历以下状态：
1. 草案（draft）：仅用于讨论，不参与正式执行。
2. 生效（active）：进入执行链路并接受观察。
3. 验证（verifying）：处于验证期，结果待判定。
4. 归档（archived）：不再执行但保留历史记录。

## 规则修改流程（7 步）
1. 发现：Observer 或执行反馈识别改进机会或问题。
2. 评估级别：按 `approval_levels.md` 判定 Level 0-3。
3. 审批：按对应级别执行“自主/通知/审批/讨论”。
4. 备份：修改前生成可恢复备份并记录 proposal 关联。
5. 修改：按提案执行最小必要改动，保留变更记录。
6. 验证期：在约定周期内持续观察指标与用户反馈。
7. 确认或回滚：验证通过则确认；恶化则自动或人工回滚。

## 规则冲突处理原则
- 宪法级规则优先于经验级规则。
- 更具体的规则优先于更通用的规则。
- 同级冲突时，更新时间更新且已验证的规则优先。
- 仍无法判定时，标记冲突并升级给 Architect 审视。

## 规则清理机制
- 对长期未触发、低价值或重复规则进行定期审视。
- 清理依据包含触发频率、验证状态、用户反馈。
- 删除规则默认按 Level 2 处理，确保可追溯与可恢复。
- 清理后保留归档记录，避免重复引入同类低价值规则。

## 审计与记录要求
每次改动至少记录：
- 触发来源（信号、反馈、观察报告）
- 审批级别与审批动作
- 修改文件与影响范围
- 验证窗口与评估指标
- 回滚条件与执行结果

## 禁止行为
- 禁止跳过“备份”直接修改规则。
- 禁止无数据支撑的高风险策略调整。
- 禁止在验证期未结束时宣称改动有效。
- 禁止删除历史记录掩盖失败或回滚事实。
